---
import type { Props } from '@astrojs/starlight/props';
import Default from '@astrojs/starlight/components/Footer.astro';
import FeedbackWidget from './FeedbackWidget.astro';
import { getLangFromUrl } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const pathname = Astro.url.pathname;
const { id } = Astro.locals.starlightRoute || {};

// Don't show feedback widget on index pages or 404 pages
const isIndexPage = pathname === '/' || pathname === '/es' || pathname === '/es/';
const is404Page = id === '404';
const shouldShowFeedbackWidget = !isIndexPage && !is404Page;
---

{shouldShowFeedbackWidget && <FeedbackWidget lang={lang} />}

<Default {...Astro.props}><slot /></Default>
