---
title: Create a grant request
tableOfContents:
  maxHeadingLevel: 2
---

import { CodeBlock, LinkOut, Tooltip } from '@interledger/docs-design-system'
import { Tabs, TabItem, LinkButton } from '@astrojs/starlight/components'
import ChunkedSnippet from '/src/components/ChunkedSnippet.astro'
import Begin from '/src/partials/before-you-begin.mdx'
import Ts from '/src/partials/ts-init-config.mdx'
import TsImport from '/src/partials/ts-import-initialize.mdx'
import PhpImport from '/src/partials/php-import-initialize.mdx'

Before a client can call the Open Payments APIs, it must request and receive a grant from the appropriate authorization server. The request must indicate the resource type the client intends to work with and the actions the client wants to take at the resource server. The response includes a `continue` object, which is part of the standard grant response format. This object is included in all grant responses but is used for interactive grants to obtain explicit user consent. While outgoing payments are interactive by default, implementations have the option to make other grants interactive if desired.

These code snippets enable a client to request a grant for the `incoming-payment`, `quote`, and `outgoing-payment` resource types. Each request includes all valid actions the client can take for the resource type.

:::note
When setting up a payment, the client first requests an incoming payment grant from the authorization server of the recipient's <Tooltip content="Account servicing entity" client: load><span>ASE</span></Tooltip>. Then, the client requests quote and outgoing payment grants from the authorization server of the sender's ASE.
:::

## Before you begin

<Begin />

## Request an incoming payment grant

<Tabs syncKey="langs">
<TabItem label='TypeScript/JavaScript'>
<LinkButton href="https://github.com/interledger/open-payments-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<details>
  <summary>Initial configuration</summary>
  <Ts />
</details>

<TsImport />

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-incoming-payment.ts'
  chunk='3'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-incoming-payment.ts'
  chunk='4'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-incoming-payment.ts'
  chunk='5'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-incoming-payment.ts'
  chunk='6'
/>

For TypeScript, run `tsx path/to/directory/index.ts`. <LinkOut href='https://github.com/interledger/open-payments-snippets/blob/main/grant/grant-incoming-payment.ts'>View full TS source</LinkOut>

For JavaScript, run `node path/to/directory/index.js`. <LinkOut href='https://github.com/interledger/open-payments-snippets/blob/main/grant/grant-incoming-payment.js'>View full JS source</LinkOut>

</TabItem>
<TabItem label="PHP">
<LinkButton href="https://github.com/interledger/open-payments-php-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>
<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantIncomingPayment.php'
  chunk='3'
/>
<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantIncomingPayment.php'
  chunk='4'
/><ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantIncomingPayment.php'
  chunk='5'
/><ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantIncomingPayment.php'
  chunk='6'
/>
{/* prettier-ignore */}

<p><LinkOut href='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantIncomingPayment.php'>View full source</LinkOut></p>
</TabItem>
</Tabs>

## Request a quote grant

<Tabs syncKey="langs">
<TabItem label='TypeScript/JavaScript'>
<LinkButton href="https://github.com/interledger/open-payments-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<details>
  <summary>Initial configuration</summary>
  <Ts />
</details>

<TsImport />

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-quote.ts'
  chunk='3'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-quote.ts'
  chunk='4'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-quote.ts'
  chunk='5'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-quote.ts'
  chunk='6'
/>

For TypeScript, run `tsx path/to/directory/index.ts`. <LinkOut href='https://github.com/interledger/open-payments-snippets/blob/main/grant/grant-quote.ts'>View full TS source</LinkOut>

For JavaScript, run `node path/to/directory/index.js`. <LinkOut href='https://github.com/interledger/open-payments-snippets/blob/main/grant/grant-quote.js'>View full JS source</LinkOut>

</TabItem>
<TabItem label="PHP">
<LinkButton href="https://github.com/interledger/open-payments-php-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>
<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantQuote.php'
  chunk='3'
/>
<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantQuote.php'
  chunk='4'
/>
<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantQuote.php'
  chunk='5'
/>
<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantQuote.php'
  chunk='6'
/>
{/* prettier-ignore */}

<p><LinkOut href='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantQuote.php'>View full source</LinkOut></p>
</TabItem>
</Tabs>

## Request an outgoing payment grant

In Open Payments, an outgoing payment grant must be interactive. An interactive grant requires interaction from a user, typically a client's user, before the grant can be issued.

<Tabs syncKey="langs">
<TabItem label='TypeScript/JavaScript'>
<LinkButton href="https://github.com/interledger/open-payments-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<details>
  <summary>Initial configuration</summary>
  <Ts />
</details>

<TsImport />

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-outgoing-payment.ts'
  chunk='3'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-outgoing-payment.ts'
  chunk='4'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-outgoing-payment.ts'
  chunk='5'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-outgoing-payment.ts'
  chunk='6'
/>

For TypeScript, run `tsx path/to/directory/index.ts`. <LinkOut href='https://github.com/interledger/open-payments-snippets/blob/main/grant/grant-outgoing-payment.ts'>View full TS source</LinkOut>

For JavaScript, run `node path/to/directory/index.js`. <LinkOut href='https://github.com/interledger/open-payments-snippets/blob/main/grant/grant-outgoing-payment.js'>View full JS source</LinkOut>

</TabItem>
<TabItem label="PHP">
<LinkButton href="https://github.com/interledger/open-payments-php-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>
<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantOutgoingPayment.php'
  chunk='3'
/>

#### Generate without an interval

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantOutgoingPayment.php'
  chunk='4'
/>

#### Generate with an interval

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantOutgoingPaymentInterval.php'
  chunk='4'
/>

<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantOutgoingPayment.php'
  chunk='5'
/>
<ChunkedSnippet
  source='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantOutgoingPayment.php'
  chunk='6'
/>
{/* prettier-ignore */}

<p><LinkOut href='https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/GrantOutgoingPayment.php'>View full source</LinkOut></p>
</TabItem>
</Tabs>

## References

- [API specification](/apis/auth-server/operations/post-request)
- [Grant negotiation and authorization](/introduction/grants)
