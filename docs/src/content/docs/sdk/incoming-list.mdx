---
title: List incoming payments
---

import { CodeBlock, LinkOut } from '@interledger/docs-design-system'
import { Tabs, TabItem, LinkButton } from '@astrojs/starlight/components'
import ChunkedSnippet from '/src/components/ChunkedSnippet.astro'
import Begin from '/src/partials/before-you-begin.mdx'
import Ts from '/src/partials/ts-init-config.mdx'
import TsImport from '/src/partials/ts-import-initialize.mdx'
import PhpImport from '/src/partials/php-import-initialize.mdx'

After one or more incoming payments are created on a wallet address, an authorized client can look up active and pending incoming payments on that wallet address.

These code snippets retrieve the first ten incoming payments on the given wallet address.

## Before you begin

<Begin />

## List all incoming payments on a wallet address

<Tabs>
<TabItem label='TypeScript/JavaScript' icon='seti:javascript'>
<LinkButton href="https://github.com/interledger/open-payments-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<details>
  <summary>Initial configuration</summary>
  <Ts />
</details>

<TsImport />

<ChunkedSnippet
  source="incoming-payment/incoming-payment-list.ts"
  l="node"
  chunk="3"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-list.ts"
  l="node"
  chunk="4"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-list.ts"
  l="node"
  chunk="5"
/>

For TypeScript, run `tsx path/to/directory/index.ts`. <LinkOut href='https://github.com/interledger/open-payments/blob/main/snippets/node/incoming-payment/incoming-payment-list.ts'>View full TS source</LinkOut>

For JavaScript, run `node path/to/directory/index.js`. <LinkOut href='https://github.com/interledger/open-payments/blob/main/snippets/node/incoming-payment/incoming-payment-list.js'>View full JS source</LinkOut>

</TabItem>
<TabItem label="Rust" icon='seti:rust'>
<LinkButton href="https://github.com/interledger/open-payments-rust/tree/main/src/snippets#readme" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-list.rs"
  l="rust"
  chunk="1"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-list.rs"
  l="rust"
  chunk="2"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-list.rs"
  l="rust"
  chunk="3"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-list.rs"
  l="rust"
  chunk="4"
/>

<p>
  <LinkOut href="https://github.com/interledger/open-payments/blob/main/snippets/rust/incoming-payment/incoming-payment-list.rs">
    View full Rust source
  </LinkOut>
</p>

</TabItem>
<TabItem label="PHP" icon='seti:php'>
<LinkButton href="https://github.com/interledger/open-payments-php-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<PhpImport />

<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/IncomingPayment/IncomingPaymentList.php"
  chunk="3"
/>
<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/IncomingPayment/IncomingPaymentList.php"
  chunk="4"
/>
<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/IncomingPayment/IncomingPaymentList.php"
  chunk="5"
/>

<p><LinkOut href='https://github.com/interledger/open-payments-php-snippets/blob/main/src/Command/IncomingPayment/IncomingPaymentList.php'>View full source</LinkOut></p>
</TabItem>

<TabItem label="Go" icon='seti:go'>
<LinkButton href="https://github.com/interledger/open-payments-go/blob/main/README.md" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

```go
package main

import (
	"context"
	"encoding/json"
	"fmt"
	"log"

	op "github.com/interledger/open-payments-go"
)

func main() {
	// Initialize Open Payments client
	client, err := op.NewAuthenticatedClient(WALLET_ADDRESS_URL, PRIVATE_KEY_BASE_64, KEY_ID)
	if err != nil {
		log.Fatalf("Error creating authenticated client: %v\n", err)
	}

	// List incoming payments
	incomingPayments, err := client.IncomingPayment.List(context.TODO(), op.IncomingPaymentListParams{
		BaseURL:       RESOURCE_SERVER_URL,
		AccessToken:   INCOMING_PAYMENT_ACCESS_TOKEN,
		WalletAddress: WALLET_ADDRESS_URL,
		Pagination: op.Pagination{
			First: "10",
		},
	})
	if err != nil {
		log.Fatalf("Error listing incoming payments: %v\n", err)
	}

	// Output
	incomingPaymentsJSON, err := json.MarshalIndent(incomingPayments, "", "  ")
	if err != nil {
		log.Fatalf("Error marshaling incoming payments: %v\n", err)
	}
	fmt.Println("INCOMING PAYMENTS:", string(incomingPaymentsJSON))
}
```

</TabItem>
<TabItem label='Java' icon='seti:java'>
<LinkButton href="https://github.com/interledger/open-payments-java?tab=readme-ov-file#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

    ```java wrap
    // 1. Import:
    import org.interledger.openpayments.httpclient.OpenPaymentsHttpClient;
    import org.interledger.openpayments.IOpenPaymentsClient;

    // 2. Client instance using HTTP:
    var client = OpenPaymentsHttpClient.defaultClient(
    "WalletAddress",
    "PrivateKeyPEM",
    "KeyId"
    );

    // 3. Retrieve the wallets:
    var receiverWallet = client.getWalletAddress("https://cloudninebank.example.com/merchant");
    var senderWallet = client.getWalletAddress("https://cloudninebank.example.com/customer");

    // 4. Create incoming payment:
    var grantRequest = this.client.createGrantIncomingPayment(receiverWallet);
    var incomingPayment = this.client.createIncomingPayment(receiverWallet, grantRequest, BigDecimal.valueOf(11.25));

    // 5. Retrieve the created incoming payments (by walletAddress):
    var incomingPaymentsFetched = this.client.getIncomingPayments(senderWallet.getId(), grantRequest);

    // 6. Logging:
    log.info("INCOMING_PAYMENTS: {}", incomingPaymentsFetched.size());
    incomingPaymentsFetched.forEach(p -> log.info("INCOMING_PAYMENT: {}", p));
    ```

</TabItem>
</Tabs>

## References

- [API specification](/apis/resource-server/operations/list-incoming-payments)
