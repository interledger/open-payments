---
title: Revoke a grant request
---

import { CodeBlock, LinkOut } from '@interledger/docs-design-system'
import { Tabs, TabItem, LinkButton } from '@astrojs/starlight/components'
import ChunkedSnippet from '/src/components/ChunkedSnippet.astro'
import Begin from '/src/partials/before-you-begin.mdx'
import Ts from '/src/partials/ts-init-config.mdx'
import TsImport from '/src/partials/ts-import-initialize.mdx'
import PhpImport from '/src/partials/php-import-initialize.mdx'

If an authorized client no longer needs access to protected resources, the client can revoke the corresponding grant request.

These code snippets enable a client to revoke (cancel) a grant that it was previously issued. When a grant request is revoked, the request is placed into a finalized state and no further updates to the grant are allowed.

## Before you begin

<Begin />

## Revoke a grant request

<Tabs>
<TabItem label='TypeScript/JavaScript' icon='seti:javascript'>
<LinkButton href="https://github.com/interledger/open-payments-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<details>
  <summary>Initial configuration</summary>
  <Ts />
</details>

<TsImport />

<ChunkedSnippet source="grant/grant-revoke.ts" l="node" chunk="3" />

For TypeScript, run `tsx path/to/directory/index.ts`. <LinkOut href='https://github.com/interledger/open-payments/blob/main/snippets/node/grant/grant-revoke.ts'>View full TS source</LinkOut>

For JavaScript, run `node path/to/directory/index.js`. <LinkOut href='https://github.com/interledger/open-payments/blob/main/snippets/node/grant/grant-revoke.js'>View full JS source</LinkOut>

</TabItem>
<TabItem label="Rust" icon='seti:rust'>
<LinkButton href="https://github.com/interledger/open-payments-rust/tree/main/src/snippets#readme" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<ChunkedSnippet source="grant/grant-revoke.rs" l="rust" chunk="1" />

<ChunkedSnippet source="grant/grant-revoke.rs" l="rust" chunk="2" />

<ChunkedSnippet source="grant/grant-revoke.rs" l="rust" chunk="3" />

<p>
  <LinkOut href="https://github.com/interledger/open-payments/blob/main/snippets/rust/grant/grant-revoke.rs">
    View full Rust source
  </LinkOut>
</p>

</TabItem>
<TabItem label="PHP" icon='seti:php'>
<LinkButton href="https://github.com/interledger/open-payments-php-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<PhpImport />

<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/Grant/CancelGrant.php"
  chunk="3"
/>

<p><LinkOut href='https://github.com/interledger/open-payments-php-snippets/blob/main/src/Command/Grant/CancelGrant.php'>View full source</LinkOut></p>
</TabItem>
<TabItem label='Java' icon='seti:java'>
<LinkButton
href="https://github.com/interledger/open-payments-java?tab=readme-ov-file#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

    ```java wrap
    // 1. Import:
    import org.interledger.openpayments.httpclient.OpenPaymentsHttpClient;
    import org.interledger.openpayments.IOpenPaymentsClient;

    // 2. Client instance using HTTP:
    IOpenPaymentsClient client = OpenPaymentsHttpClient.defaultClient(
        "WalletAddress",
        "PrivateKeyPEM",
        "KeyId"
    );

    // 3. Retrieve the wallets:
    var senderWallet = client.getWalletAddress("https://cloudninebank.example.com/customer");
    var receiverWallet = client.getWalletAddress("https://cloudninebank.example.com/merchant");

    // 4. Create incoming payment:
    var grantRequest = this.client.createGrantIncomingPayment(receiverWallet);
    var incomingPayment = this.client.createIncomingPayment(receiverWallet, grantRequest, BigDecimal.valueOf(11.25));

    // 5. Create quote:
    var quoteRequest = this.client.createGrantQuote(senderWallet);
    var quote = this.client.createQuote(quoteRequest.getAccess().getToken(), senderWallet, incomingPayment);

    var urlToOpen = "http://localhost:%d?paymentId=1234".formatted(port);

    // 6. Create outing payment from quote:
    var opContinueInteract = this.client.createGrantContinuation(
            senderWallet,
            quote.getDebitAmount(),
            URI.create(urlToOpen),
            "test"
    );

    // 7. USER APPROVES REQUEST.

    // 8. Finalize/Continue
    var finalized = this.client.createGrantFinalize(opContinueInteract, "Reference from USER interaction.");

    // 9. TODO: Revoke the finalised grant.

    // 10. Logging:
    log.info("FINALIZED: {}", finalized);
    ```
</TabItem>
</Tabs>

## References

- [API specification](/apis/auth-server/operations/delete-continue)
- [Grant negotiation and authorization](/identity/grants)
