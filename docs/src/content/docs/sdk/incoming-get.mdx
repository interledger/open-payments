---
title: Get an incoming payment
tableOfContents:
  maxHeadingLevel: 2
---

import { CodeBlock, LinkOut } from '@interledger/docs-design-system'
import { Tabs, TabItem, LinkButton } from '@astrojs/starlight/components'
import ChunkedSnippet from '/src/components/ChunkedSnippet.astro'
import Begin from '/src/partials/before-you-begin.mdx'
import Ts from '/src/partials/ts-init-config.mdx'
import TsImport from '/src/partials/ts-import-initialize.mdx'
import PhpImport from '/src/partials/php-import-initialize.mdx'

An authorized client can look up the state of an incoming payment on a wallet address. This is useful when a client must determine if an incoming payment is still active and pending payment.

These code snippets return the state and details of a specific incoming payment, if found.

## Before you begin

<Begin />

## Get the state of an incoming payment

<Tabs>
<TabItem label='TypeScript/JavaScript' icon='seti:javascript'>
<LinkButton href="https://github.com/interledger/open-payments-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<details>
  <summary>Initial configuration</summary>
  <Ts />
</details>

<TsImport />

#### Get with authentication

<ChunkedSnippet
  source="incoming-payment/incoming-payment-get.ts"
  l="node"
  chunk="3"
/>

#### Get without authentication

<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-snippets/refs/heads/main/incoming-payment/incoming-payment-get-public.ts"
  chunk="3"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-get.ts"
  l="node"
  chunk="4"
/>

For TypeScript, run `tsx path/to/directory/index.ts`. <LinkOut href='https://github.com/interledger/open-payments/blob/main/snippets/node/incoming-payment/incoming-payment-get.ts'>View full TS source</LinkOut>

For JavaScript, run `node path/to/directory/index.js`. <LinkOut href='https://github.com/interledger/open-payments/blob/main/snippets/node/incoming-payment/incoming-payment-get.js'>View full JS source</LinkOut>

</TabItem>
<TabItem label="Rust" icon='seti:rust'>
<LinkButton href="https://github.com/interledger/open-payments-rust/tree/main/src/snippets#readme" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-get.rs"
  l="rust"
  chunk="1"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-get.rs"
  l="rust"
  chunk="2"
/>

#### Get with authentication

<ChunkedSnippet
  source="incoming-payment/incoming-payment-get.rs"
  l="rust"
  chunk="3"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-get.rs"
  l="rust"
  chunk="4"
/>

#### Get without authentication

<ChunkedSnippet
  source="incoming-payment/incoming-payment-get-public.rs"
  l="rust"
  chunk="3"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-get-public.rs"
  l="rust"
  chunk="4"
/>

<p>
  <LinkOut href="https://github.com/interledger/open-payments/blob/main/snippets/rust/incoming-payment/incoming-payment-get.rs">
    View full Rust source
  </LinkOut>
</p>

</TabItem>
<TabItem label="PHP" icon='seti:php'>
<LinkButton href="https://github.com/interledger/open-payments-php-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<PhpImport />

#### Get with authentication

<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/IncomingPayment/IncomingPaymentGet.php"
  chunk="3"
/>

#### Get without authentication

<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/IncomingPayment/PublicIncomingPaymentGet.php"
  chunk="3"
/>

<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/IncomingPayment/IncomingPaymentGet.php"
  chunk="4"
/>

<p><LinkOut href='https://github.com/interledger/open-payments-php-snippets/blob/main/src/Command/IncomingPayment/IncomingPaymentGet.php'>View full source with authentication</LinkOut></p>
<p><LinkOut href='https://github.com/interledger/open-payments-php-snippets/blob/main/src/Command/IncomingPayment/PublicIncomingPaymentGet.php'>View full source without authentication</LinkOut></p>
</TabItem>

<TabItem label="Go" icon='seti:go'>
<LinkButton href="https://github.com/interledger/open-payments-go/blob/main/README.md" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

```go
package main

import (
	"context"
	"encoding/json"
	"fmt"
	"log"

	op "github.com/interledger/open-payments-go"
)

func main() {
	// Initialize Open Payments client
	client, err := op.NewAuthenticatedClient(WALLET_ADDRESS_URL, PRIVATE_KEY_BASE_64, KEY_ID)
	if err != nil {
		log.Fatalf("Error creating authenticated client: %v\n", err)
	}

	// Get incoming payment
	incomingPayment, err := client.IncomingPayment.Get(context.TODO(), op.IncomingPaymentGetParams{
		URL:         INCOMING_PAYMENT_URL,
		AccessToken: ACCESS_TOKEN,
	})

  // Or, get public incoming payment without authenticating
	// incomingPayment, err := client.IncomingPayment.GetPublic(context.TODO(), op.IncomingPaymentGetPublicParams{
	// 	URL: INCOMING_PAYMENT_URL,
	// })

	if err != nil {
		log.Fatalf("Error fetching incoming payment: %v\n", err)
	}

	// Output
	incomingPaymentJSON, err := json.MarshalIndent(incomingPayment, "", "  ")
	if err != nil {
		log.Fatalf("Error marshaling incoming payment: %v\n", err)
	}
	fmt.Println("INCOMING PAYMENT:", string(incomingPaymentJSON))
}
```

</TabItem>
<TabItem label='Java' icon='seti:java'>
<LinkButton href="https://github.com/interledger/open-payments-java?tab=readme-ov-file#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

    ```java wrap
    // 1. Import:
    import org.interledger.openpayments.httpclient.OpenPaymentsHttpClient;
    import org.interledger.openpayments.IOpenPaymentsClient;

    // 2. Client instance using HTTP:
    IOpenPaymentsClient client = OpenPaymentsHttpClient.defaultClient(
    "WalletAddress",
    "PrivateKeyPEM",
    "KeyId"
    );

    // 3. Retrieve the wallet:
    var receiverWallet = client.getWalletAddress("https://cloudninebank.example.com/customer");

    // 4. Grant for incoming payment (default):
    var grantRequest = this.client.createGrantIncomingPayment(receiverWallet);

    // 5. Create the incoming payment:
    var incomingPayment = this.client.createIncomingPayment(receiverWallet, grantRequest, BigDecimal.valueOf(11.25));

    // 6. Get the newly created incoming payment (fetch by ID):
    var incomingPaymentFetched = this.client.getIncomingPayment(incomingPayment.getId(), grantRequest);

    // 7. Logging:
    log.info("INCOMING_PAYMENT: {}", incomingPaymentFetched);
    ```

</TabItem>
</Tabs>

## References

- [API specification](/apis/resource-server/operations/get-incoming-payment)
