---
title: Create an incoming payment
---

import { CodeBlock, LinkOut } from '@interledger/docs-design-system'
import { Tabs, TabItem, LinkButton } from '@astrojs/starlight/components'
import ChunkedSnippet from '/src/components/ChunkedSnippet.astro'
import Begin from '/src/partials/before-you-begin.mdx'
import Ts from '/src/partials/ts-init-config.mdx'
import TsImport from '/src/partials/ts-import-initialize.mdx'
import PhpImport from '/src/partials/php-import-initialize.mdx'

Once an authorized client obtains the requisite grant from the recipient’s authentication server, the client must create an incoming payment resource before any payments can be sent to the recipient’s wallet address.

These code snippets create an incoming payment of \$10 USD at a given wallet address, allowing subsequent payments to be sent to that wallet address up to $10 USD.

## Before you begin

<Begin />

## Create an incoming payment resource

<Tabs>
<TabItem label='TypeScript/JavaScript' icon='seti:javascript'>
<LinkButton href="https://github.com/interledger/open-payments-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<details>
  <summary>Initial configuration</summary>
  <Ts />
</details>

<TsImport />

<ChunkedSnippet
  source="incoming-payment/incoming-payment-create.ts"
  l="node"
  chunk="3"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-create.ts"
  l="node"
  chunk="4"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-create.ts"
  l="node"
  chunk="5"
/>

For TypeScript, run `tsx path/to/directory/index.ts`. <LinkOut href='https://github.com/interledger/open-payments/blob/main/snippets/node/incoming-payment/incoming-payment-create.ts'>View full TS source</LinkOut>

For JavaScript, run `node path/to/directory/index.js`. <LinkOut href='https://github.com/interledger/open-payments/blob/main/snippets/node/incoming-payment/incoming-payment-create.js'>View full JS source</LinkOut>

</TabItem>
<TabItem label="Rust" icon='seti:rust'>
<LinkButton href="https://github.com/interledger/open-payments-rust/tree/main/src/snippets#readme" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-create.rs"
  l="rust"
  chunk="1"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-create.rs"
  l="rust"
  chunk="2"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-create.rs"
  l="rust"
  chunk="3"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-create.rs"
  l="rust"
  chunk="4"
/>

<ChunkedSnippet
  source="incoming-payment/incoming-payment-create.rs"
  l="rust"
  chunk="5"
/>

<p>
  <LinkOut href="https://github.com/interledger/open-payments/blob/main/snippets/rust/incoming-payment/incoming-payment-create.rs">
    View full Rust source
  </LinkOut>
</p>

</TabItem>
<TabItem label="PHP" icon='seti:php'>
<LinkButton href="https://github.com/interledger/open-payments-php-snippets/blob/main/README.md#prerequisites" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

<PhpImport />

<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/IncomingPayment/IncomingPaymentCreate.php"
  chunk="3"
/>
<ChunkedSnippet
  source="https://raw.githubusercontent.com/interledger/open-payments-php-snippets/refs/heads/main/src/Command/IncomingPayment/IncomingPaymentCreate.php"
  chunk="4"
/>

<p><LinkOut href='https://github.com/interledger/open-payments-php-snippets/blob/main/src/Command/IncomingPayment/IncomingPaymentCreate.php'>View full source</LinkOut></p>
</TabItem>

<TabItem label="Go" icon='seti:go'>
<LinkButton href="https://github.com/interledger/open-payments-go/blob/main/README.md" target="_blank" icon="external" iconPlacement="start">Prerequisites</LinkButton>

```go
package main

import (
	"context"
	"encoding/json"
	"fmt"
	"log"
	"time"

  op "github.com/interledger/open-payments-go"
  rs "github.com/interledger/open-payments-go/generated/resourceserver"

)

func main() {
  // Initialize Open Payments client
  client, err := op.NewAuthenticatedClient(WALLET_ADDRESS_URL, PRIVATE_KEY_BASE_64, KEY_ID)
  if err != nil {
    log.Fatalf("Error creating authenticated client: %v\n", err)
  }

  // Create incoming payment
  expiresAt := time.Now().Add(10 * time.Minute)
  incomingPayment, err := client.IncomingPayment.Create(context.TODO(), op.IncomingPaymentCreateParams{
    BaseURL:     RESOURCE_SERVER_URL,
    AccessToken: ACCESS_TOKEN,
    Payload: rs.CreateIncomingPaymentJSONBody{
      WalletAddressSchema: WALLET_ADDRESS_URL,
      IncomingAmount: &rs.Amount{
        Value:      "1000",
        AssetCode:  "USD",
        AssetScale: 2,
      },
      ExpiresAt: &expiresAt,
    },
  })
  if err != nil {
    log.Fatalf("Error creating incoming payment: %v\n", err)
  }

  // Output
  incomingPaymentJSON, err := json.MarshalIndent(incomingPayment, "", "  ")
  if err != nil {
    log.Fatalf("Error marshaling incoming payment: %v\n", err)
  }
  fmt.Println("INCOMING PAYMENT:", string(incomingPaymentJSON))
  fmt.Println("INCOMING PAYMENT URL =", *incomingPayment.Id)
}

```

</TabItem>
</Tabs>

## References

- [API specification](/apis/resource-server/operations/create-incoming-payment)


```
