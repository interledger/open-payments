import { Steps } from '@astrojs/starlight/components'
import { LinkOut } from '@interledger/docs-design-system'
import ChunkedSnippet from '/src/components/ChunkedSnippet.astro'

<details>
<summary>Prerequisites</summary>

- Node 20 or higher
- A package manager such as NPM or PNPM
- <LinkOut href='https://www.npmjs.com/package/@interledger/open-payments'>
    Open Payments SDK
  </LinkOut>
- <LinkOut href='https://www.npmjs.com/package/tsx'>TSX</LinkOut>
  <p></p>
  <strong>Additional configuration</strong>

<Steps>
1. Add `"type": "module"` to `package.json`.
2. Add the following to `tsconfig.json`
    ```json
    {
      "compilerOptions": {
        "target": "ES2022",
        "module": "ES2022"
      }
    }
    ```
3. Import `createAuthenticatedClient` from the Open Payments SDK.
    <ChunkedSnippet
      source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/incoming-payment/incoming-payment-create.ts'
      chunk='1'
    />
4. Create an authenticated Open Payments client by providing the following properties:
    - `walletAddressURL` : your Open Payments-enabled wallet address that your client will use to authenticate itself to one or more authorization servers.
    - `privateKey` : the EdDSA-Ed25519 key or preferably the absolute or relative file path to the key that's bound to your wallet address. A public key signed with this private key must be made available as a public JWK document at `{walletAddressUrl}/jwks.json` url.
    - `keyId` : the identifier of the private key and the corresponding public key. 
    <ChunkedSnippet
      source='https://raw.githubusercontent.com/interledger/open-payments-snippets/main/grant/grant-outgoing-payment.ts'
      chunk='2'/>
</Steps>
</details>
